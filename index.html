<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WaniKani Level 60 Predictor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;800&family=DM+Mono:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="wrap">

  <header>
    <h1>WaniKani<br /><em>Level 60</em> Predictor</h1>
    <p>Forecast your kanji mastery date</p>
  </header>

  <!-- Input card -->
  <div class="card" id="input-card">
    <div class="eyebrow">WaniKani v2 API Key</div>
    <div class="input-row">
      <input type="password" id="token-input" placeholder="Paste your personal access token..." />
      <button class="btn" id="fetch-btn" onclick="run()">Predict</button>
    </div>
    <div id="error-box" class="error-box" style="display:none"></div>
    <p class="hint">
      Get your key at
      <a href="https://www.wanikani.com/settings/personal_access_tokens" target="_blank">
        wanikani.com/settings/personal_access_tokens
      </a>
      &nbsp;Â·&nbsp;
      <span style="cursor:pointer;color:var(--red);text-decoration:underline" onclick="runDemo()">
        try demo data
      </span>
    </p>
  </div>

  <!-- Loading -->
  <div id="loading">
    <div class="spinner"></div>
    <p id="loading-msg" style="font-size:12px;color:var(--muted);letter-spacing:0.1em">Fetching your journey...</p>
  </div>

  <!-- Results -->
  <div id="results">
    <button class="btn ghost" id="reset-btn" onclick="reset()">â† Start over</button>

    <!-- Stats -->
    <div class="stats-grid" id="stats-grid"></div>

    <!-- Big prediction -->
    <div class="big-pred" id="big-pred">
      <div class="eyebrow">Estimated Level 60 Date</div>
      <div class="pred-date" id="pred-date"></div>
      <div class="pred-sub" id="pred-sub"></div>
      <div style="margin-top:20px">
        <div class="eyebrow" style="margin-bottom:8px">Pace scenario</div>
        <div class="pace-row" id="pace-row"></div>
      </div>
      <div class="scenarios" id="scenarios"></div>
    </div>

    <!-- Level chart -->
    <div class="chart-wrap">
      <div class="eyebrow" id="chart-label"></div>
      <div id="chart"></div>
    </div>

    <p class="footnote">
      ğŸ”´ Significantly above your median pace &nbsp;Â·&nbsp;
      ğŸŸ¡ Faster than usual &nbsp;Â·&nbsp;
      ğŸŸ¢ On track<br />
      Time per level calculated from <em>started_at</em> â†’ <em>passed_at</em>.
      Predictions extrapolate your selected pace across all remaining levels.
    </p>

    <!-- How to speed up -->
    <div class="speedup-section" id="speedup-section" style="display:none">
      <div class="speedup-header">
        <div class="eyebrow" style="color:var(--gold);margin-bottom:4px">Potential time savings</div>
        <h2 class="speedup-title">How to reach Level 60 faster</h2>
        <p class="speedup-sub">Based on your actual review history</p>
      </div>

      <div class="insight-grid" id="insight-grid"></div>

      <div class="insight-detail card gold" id="insight-windows" style="margin-bottom:20px">
        <div class="eyebrow">Review windows</div>
        <div id="windows-content"></div>
      </div>

      <div class="insight-detail card gold" id="insight-mistakes" style="margin-bottom:20px">
        <div class="eyebrow">Accuracy impact</div>
        <div id="mistakes-content"></div>
      </div>

      <p class="footnote">
        * Minimum level time assumes hitting every SRS review window on the dot with 100% accuracy:
        4h â†’ 8h â†’ 23h â†’ 47h for radicals, plus a second pass for kanji. Theoretical minimum is ~3d 10h per level.
        Your actual savings will vary based on sleep schedule and review load.
      </p>
    </div>
  </div>

</div>

<script src="app.js"></script>
</body>
</html>
